package main

import (
	"os"
	"testing"
)

const html = `
<div class=\"qml-explanation\" data-copyright=\"xkw.com-1751349886-107421729498496700-LP9ZlKaf1rs6fclgdDnQWlWK9PS2ciZmJje1h9_2heRjhEV7U-f5D6c-NWupwRrR\"><div class=\"qml-seg\" seg-name=\"分析\">【分析】<p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">（</span><span style=\"font-family: 'Times New Roman';\">1</span><span style=\"font-family: 宋体;\">）根据题意列出</span><math math-svg=\"https://img.xkw.com/dksih/formula/76f0649064a085fb74c997fb507a9b6d.svg\" latex=\"$a,b,c$\"><mrow><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>c</mi></mrow></math><span style=\"font-family: 宋体;\">的关系式,解方程求出</span><math math-svg=\"https://img.xkw.com/dksih/formula/76f0649064a085fb74c997fb507a9b6d.svg\" latex=\"$a,b,c$\"><mrow><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>c</mi></mrow></math><span style=\"font-family: 宋体;\">,即可得到椭圆的标准方程；</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">（</span><span style=\"font-family: 'Times New Roman';\">2</span><span style=\"font-family: 宋体;\">）(ⅰ)设</span><math math-svg=\"https://img.xkw.com/dksih/formula/0b45ce6062e008387b69492473ad82cf.svg\" latex=\"$R\\left(x_{0},y_{0}\\right)$\"><mrow><mi>R</mi><mfenced close=\")\" open=\"(\"><mrow><msub><mi>x</mi><mn>0</mn></msub><mo>,</mo><msub><mi>y</mi><mn>0</mn></msub></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">,根据斜率相等以及题目条件列式,化简即可求出或者利用数乘向量求出；</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">(ⅱ) 根据斜率关系可得到点</span><math math-svg=\"https://img.xkw.com/dksih/formula/dad2a36927223bd70f426ba06aea4b45.svg\" latex=\"$P$\"><mi>P</mi></math><span style=\"font-family: 宋体;\">的轨迹为圆（除去两点），再根据点与圆的最值求法结合三角换元或者直接运算即可解出.</span></p></div><div class=\"qml-exps-sq\" id-container=\"question\">(1)小问详解： <p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">由题可知,</span><math math-svg=\"https://img.xkw.com/dksih/formula/87561c5582ad15e22e3a7be0a4db00ee.svg\" latex=\"$A\\left(0,-b\\right),B\\left(a,0\\right)$\"><mrow><mi>A</mi><mfenced close=\")\" open=\"(\"><mrow><mn>0</mn><mo>,</mo><mo>−</mo><mi>b</mi></mrow></mfenced><mo>,</mo><mi>B</mi><mfenced close=\")\" open=\"(\"><mrow><mi>a</mi><mo>,</mo><mn>0</mn></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">，所以</span><math math-svg=\"https://img.xkw.com/dksih/formula/f312f81be320a3929fda49ed3d7e4355.svg\" latex=\"$\\left\\{\\begin{array}{l} \\sqrt{a^{2}+b^{2}}=\\sqrt{10}\\\\ e=\\frac{c}{a}=\\frac{2\\sqrt{2}}{3}\\\\ c^{2}=a^{2}-b^{2} \\end{array}\\right.$\"><mrow><mfenced close=\"\" open=\"{\"><mrow><mtable columnalign=\"left\"><mtr columnalign=\"left\"><mtd columnalign=\"left\"><mrow><msqrt><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></mrow></msqrt><mo>=</mo><msqrt><mrow><mn>10</mn></mrow></msqrt></mrow></mtd></mtr><mtr columnalign=\"left\"><mtd columnalign=\"left\"><mrow><mi>e</mi><mo>=</mo><mfrac><mi>c</mi><mi>a</mi></mfrac><mo>=</mo><mfrac><mrow><mn>2</mn><msqrt><mn>2</mn></msqrt></mrow><mn>3</mn></mfrac></mrow></mtd></mtr><mtr columnalign=\"left\"><mtd columnalign=\"left\"><mrow><msup><mi>c</mi><mn>2</mn></msup><mo>=</mo><msup><mi>a</mi><mn>2</mn></msup><mo>−</mo><msup><mi>b</mi><mn>2</mn></msup></mrow></mtd></mtr></mtable></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">，解得</span><math math-svg=\"https://img.xkw.com/dksih/formula/c2c4bf411e14e8b959e3f1d15f742408.svg\" latex=\"$a^{2}=9,b^{2}=1,c^{2}=8$\"><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>=</mo><mn>9</mn><mo>,</mo><msup><mi>b</mi><mn>2</mn></msup><mo>=</mo><mn>1</mn><mo>,</mo><msup><mi>c</mi><mn>2</mn></msup><mo>=</mo><mn>8</mn></mrow></math><span style=\"font-family: 宋体;\">，</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">故椭圆</span><span style=\"font-style: italic;font-family: 'Times New Roman';\">C</span><span style=\"font-family: 宋体;\">的标准方程为</span><math math-svg=\"https://img.xkw.com/dksih/formula/fbf679418512d6ad973531df808fd267.svg\" latex=\"$\\frac{x^{2}}{9}+y^{2}=1$\"><mrow><mfrac><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><mn>9</mn></mfrac><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>=</mo><mn>1</mn></mrow></math><span style=\"font-family: 宋体;\">；</span></p></div><div class=\"qml-exps-sq\" id-container=\"question\">(2)小问详解： <p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">(ⅰ)设</span><math math-svg=\"https://img.xkw.com/dksih/formula/0b45ce6062e008387b69492473ad82cf.svg\" latex=\"$R\\left(x_{0},y_{0}\\right)$\"><mrow><mi>R</mi><mfenced close=\")\" open=\"(\"><mrow><msub><mi>x</mi><mn>0</mn></msub><mo>,</mo><msub><mi>y</mi><mn>0</mn></msub></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">，易知</span><math math-svg=\"https://img.xkw.com/dksih/formula/0baedc4d7e690ab3f7d80d30ba0a9efe.svg\" latex=\"$m\\neq 0$\"><mrow><mi>m</mi><mo>≠</mo><mn>0</mn></mrow></math><span style=\"font-family: 宋体;\">，</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">法一：所以</span><math math-svg=\"https://img.xkw.com/dksih/formula/aa9d21c02cc4e5e67a22d58c46d78dbf.svg\" latex=\"$k_{AP}=\\frac{n+1}{m}$\"><mrow><msub><mi>k</mi><mrow><mi>A</mi><mi>P</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mi>m</mi></mfrac></mrow></math><span style=\"font-family: 宋体;\">，故</span><math math-svg=\"https://img.xkw.com/dksih/formula/ef11d3b0807f7a50655ff1c249c16ae1.svg\" latex=\"$\\frac{y_{0}+1}{x_{0}}=\\frac{n+1}{m}$\"><mrow><mfrac><mrow><msub><mi>y</mi><mn>0</mn></msub><mo>+</mo><mn>1</mn></mrow><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mi>m</mi></mfrac></mrow></math><span style=\"font-family: 宋体;\">，且</span><math math-svg=\"https://img.xkw.com/dksih/formula/9215a9c8cc1013c17d116cab9741bd9b.svg\" latex=\"$mx_{0}> 0$\"><mrow><mi>m</mi><msub><mi>x</mi><mn>0</mn></msub><mo>&gt;</mo><mn>0</mn></mrow></math><span style=\"font-family: 宋体;\">．</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">因为</span><math math-svg=\"https://img.xkw.com/dksih/formula/ad5745b2dc86ddc6845c8594eaaab146.svg\" latex=\"$A\\left(0,-1\\right)$\"><mrow><mi>A</mi><mfenced close=\")\" open=\"(\"><mrow><mn>0</mn><mo>,</mo><mo>−</mo><mn>1</mn></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">，</span><math math-svg=\"https://img.xkw.com/dksih/formula/c6f3f6dd163c9ee1c2e428bb818be35f.svg\" latex=\"$\\left|  AR\\right|  \\left|  AP\\right|  =3$\"><mrow><mfenced close=\"|\" open=\"|\"><mrow><mi>A</mi><mi>R</mi></mrow></mfenced><mfenced close=\"|\" open=\"|\"><mrow><mi>A</mi><mi>P</mi></mrow></mfenced><mo>=</mo><mn>3</mn></mrow></math><span style=\"font-family: 宋体;\">，所以</span><math math-svg=\"https://img.xkw.com/dksih/formula/5b47d0cb1b37c062aedfaa86addec6f7.svg\" latex=\"$\\sqrt{{x}_{0}^{2}+\\left(y_{0}+1\\right)^{2}}\\times \\sqrt{m^{2}+\\left(n+1\\right)^{2}}=3$\"><mrow><msqrt><mrow><msubsup><mi>x</mi><mn>0</mn><mn>2</mn></msubsup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><msub><mi>y</mi><mn>0</mn></msub><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></msqrt><mo>×</mo><msqrt><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></msqrt><mo>=</mo><mn>3</mn></mrow></math><span style=\"font-family: 宋体;\">，</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">即</span><math math-svg=\"https://img.xkw.com/dksih/formula/e1ac2aaedceb3880f4f546c92e9c76c0.svg\" latex=\"$\\left[1+\\left(\\frac{n+1}{m}\\right)^{2}\\right]x_{0}m=3$\"><mrow><mfenced close=\"]\" open=\"[\"><mrow><mn>1</mn><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mi>m</mi></mfrac></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfenced><msub><mi>x</mi><mn>0</mn></msub><mi>m</mi><mo>=</mo><mn>3</mn></mrow></math><span style=\"font-family: 宋体;\">，解得</span><math math-svg=\"https://img.xkw.com/dksih/formula/4c28950cc3198b473d001face698a73c.svg\" latex=\"$x_{0}=\\frac{3m}{m^{2}+\\left(n+1\\right)^{2}}$\"><mrow><msub><mi>x</mi><mn>0</mn></msub><mo>=</mo><mfrac><mrow><mn>3</mn><mi>m</mi></mrow><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfrac></mrow></math><span style=\"font-family: 宋体;\">，所以</span><math math-svg=\"https://img.xkw.com/dksih/formula/26f179194a4ffae60fbdc4c0d2ffa2c6.svg\" latex=\"$y_{0}=\\frac{n+2-m^{2}-n^{2}}{m^{2}+\\left(n+1\\right)^{2}}$\"><mrow><msub><mi>y</mi><mn>0</mn></msub><mo>=</mo><mfrac><mrow><mi>n</mi><mo>+</mo><mn>2</mn><mo>−</mo><msup><mi>m</mi><mn>2</mn></msup><mo>−</mo><msup><mi>n</mi><mn>2</mn></msup></mrow><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfrac></mrow></math><span style=\"font-family: 宋体;\">，</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">所以点</span><math math-svg=\"https://img.xkw.com/dksih/formula/4aa0df7f1e45f9de29e802c7f19a4f64.svg\" latex=\"$R$\"><mi>R</mi></math><span style=\"font-family: 宋体;\">的坐标为</span><math math-svg=\"https://img.xkw.com/dksih/formula/0e19fe59f5936155853002521b3ecf5e.svg\" latex=\"$\\left(\\frac{3m}{m^{2}+\\left(n+1\\right)^{2}},\\frac{n+2-m^{2}-n^{2}}{m^{2}+\\left(n+1\\right)^{2}}\\right)$\"><mrow><mfenced close=\")\" open=\"(\"><mrow><mfrac><mrow><mn>3</mn><mi>m</mi></mrow><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfrac><mo>,</mo><mfrac><mrow><mi>n</mi><mo>+</mo><mn>2</mn><mo>−</mo><msup><mi>m</mi><mn>2</mn></msup><mo>−</mo><msup><mi>n</mi><mn>2</mn></msup></mrow><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfrac></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">.</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">法二：设</span><math math-svg=\"https://img.xkw.com/dksih/formula/086fe784f1f7834530daaa6ce831dc24.svg\" latex=\"$\\vec {AR}=\\lambda \\vec {AP},\\lambda > 0$\"><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>R</mi></mrow><mo stretchy=\"true\">⃗</mo></mover><mo>=</mo><mi>λ</mi><mover accent=\"true\"><mrow><mi>A</mi><mi>P</mi></mrow><mo stretchy=\"true\">⃗</mo></mover><mo>,</mo><mi>λ</mi><mo>&gt;</mo><mn>0</mn></mrow></math><span style=\"font-family: 宋体;\">，则</span><math math-svg=\"https://img.xkw.com/dksih/formula/39d073741e56834d98f7a45d6d075b70.svg\" latex=\"$\\left|  AR\\right|  \\left|  AP\\right|  =3\\Rightarrow \\lambda \\left[m^{2}+\\left(n+1\\right)^{2}\\right]=3$\"><mrow><mfenced close=\"|\" open=\"|\"><mrow><mi>A</mi><mi>R</mi></mrow></mfenced><mfenced close=\"|\" open=\"|\"><mrow><mi>A</mi><mi>P</mi></mrow></mfenced><mo>=</mo><mn>3</mn><mo>⇒</mo><mi>λ</mi><mfenced close=\"]\" open=\"[\"><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfenced><mo>=</mo><mn>3</mn></mrow></math><span style=\"font-family: 宋体;\">，所以</span></p><p style=\"text-align:justify;word-break:break-word;\"><math math-svg=\"https://img.xkw.com/dksih/formula/6d3847e3edafb7d82e94b0053093c6b9.svg\" latex=\"$\\lambda =\\frac{3}{m^{2}+\\left(n+1\\right)^{2}}$\"><mrow><mi>λ</mi><mo>=</mo><mfrac><mn>3</mn><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfrac></mrow></math><span style=\"font-family: 宋体;\">，</span><math math-svg=\"https://img.xkw.com/dksih/formula/8b6f4c9033430fd7e54b764886cba3eb.svg\" latex=\"$\\vec {AR}=\\lambda \\vec {AP}=\\lambda \\left(m,n+1\\right)=\\left(\\frac{3m}{m^{2}+\\left(n+1\\right)^{2}},\\frac{3\\left(n+1\\right)}{m^{2}+\\left(n+1\\right)^{2}}\\right)$\"><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>R</mi></mrow><mo stretchy=\"true\">⃗</mo></mover><mo>=</mo><mi>λ</mi><mover accent=\"true\"><mrow><mi>A</mi><mi>P</mi></mrow><mo stretchy=\"true\">⃗</mo></mover><mo>=</mo><mi>λ</mi><mfenced close=\")\" open=\"(\"><mrow><mi>m</mi><mo>,</mo><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced><mo>=</mo><mfenced close=\")\" open=\"(\"><mrow><mfrac><mrow><mn>3</mn><mi>m</mi></mrow><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfrac><mo>,</mo><mfrac><mrow><mn>3</mn><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfrac></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">，故</span></p><p style=\"text-align:justify;word-break:break-word;\"><span></span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">点</span><math math-svg=\"https://img.xkw.com/dksih/formula/4aa0df7f1e45f9de29e802c7f19a4f64.svg\" latex=\"$R$\"><mi>R</mi></math><span style=\"font-family: 宋体;\">的坐标为</span><math math-svg=\"https://img.xkw.com/dksih/formula/0e19fe59f5936155853002521b3ecf5e.svg\" latex=\"$\\left(\\frac{3m}{m^{2}+\\left(n+1\\right)^{2}},\\frac{n+2-m^{2}-n^{2}}{m^{2}+\\left(n+1\\right)^{2}}\\right)$\"><mrow><mfenced close=\")\" open=\"(\"><mrow><mfrac><mrow><mn>3</mn><mi>m</mi></mrow><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfrac><mo>,</mo><mfrac><mrow><mi>n</mi><mo>+</mo><mn>2</mn><mo>−</mo><msup><mi>m</mi><mn>2</mn></msup><mo>−</mo><msup><mi>n</mi><mn>2</mn></msup></mrow><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfrac></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">.</span></p><p style=\"text-align:justify;word-break:break-word;\"><img  height=\"128\" src=\"https://img.xkw.com/dksih/QBM/editorImg/2025/6/8/996f3590-6e07-4efa-9bc6-e2b74c31902d.png\" width=\"149\" /></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">(ⅱ)因为</span><math math-svg=\"https://img.xkw.com/dksih/formula/26516e91835bec2771a4af61aa445c19.svg\" latex=\"$k_{OR}=\\frac{\\frac{n+2-m^{2}-n^{2}}{m^{2}+\\left(n+1\\right)^{2}}}{\\frac{3m}{m^{2}+\\left(n+1\\right)^{2}}}=\\frac{n+2-m^{2}-n^{2}}{3m}$\"><mrow><msub><mi>k</mi><mrow><mi>O</mi><mi>R</mi></mrow></msub><mo>=</mo><mfrac><mrow><mfrac><mrow><mi>n</mi><mo>+</mo><mn>2</mn><mo>−</mo><msup><mi>m</mi><mn>2</mn></msup><mo>−</mo><msup><mi>n</mi><mn>2</mn></msup></mrow><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfrac></mrow><mrow><mfrac><mrow><mn>3</mn><mi>m</mi></mrow><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfenced></mrow><mn>2</mn></msup></mrow></mfrac></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>n</mi><mo>+</mo><mn>2</mn><mo>−</mo><msup><mi>m</mi><mn>2</mn></msup><mo>−</mo><msup><mi>n</mi><mn>2</mn></msup></mrow><mrow><mn>3</mn><mi>m</mi></mrow></mfrac></mrow></math><span style=\"font-family: 宋体;\">,</span><math math-svg=\"https://img.xkw.com/dksih/formula/9e6da922804873ff0316964f031c7057.svg\" latex=\"$k_{OP}=\\frac{n}{m}$\"><mrow><msub><mi>k</mi><mrow><mi>O</mi><mi>P</mi></mrow></msub><mo>=</mo><mfrac><mi>n</mi><mi>m</mi></mfrac></mrow></math><span style=\"font-family: 宋体;\">,由</span><math math-svg=\"https://img.xkw.com/dksih/formula/2d44397a0eba2f400a0f0f3ec56415d0.svg\" latex=\"$k_{OR}=3k_{OP}$\"><mrow><msub><mi>k</mi><mrow><mi>O</mi><mi>R</mi></mrow></msub><mo>=</mo><mn>3</mn><msub><mi>k</mi><mrow><mi>O</mi><mi>P</mi></mrow></msub></mrow></math><span style=\"font-family: 宋体;\">,可得</span></p><p style=\"text-align:justify;word-break:break-word;\"><math math-svg=\"https://img.xkw.com/dksih/formula/aabc20f489388a961cff3d4b6e89e027.svg\" latex=\"$\\frac{3n}{m}=\\frac{n+2-m^{2}-n^{2}}{3m}$\"><mrow><mfrac><mrow><mn>3</mn><mi>n</mi></mrow><mi>m</mi></mfrac><mo>=</mo><mfrac><mrow><mi>n</mi><mo>+</mo><mn>2</mn><mo>−</mo><msup><mi>m</mi><mn>2</mn></msup><mo>−</mo><msup><mi>n</mi><mn>2</mn></msup></mrow><mrow><mn>3</mn><mi>m</mi></mrow></mfrac></mrow></math><span style=\"font-family: 宋体;\">,化简得</span><math math-svg=\"https://img.xkw.com/dksih/formula/fc0063ee4395eed39e3fe9f14277c38e.svg\" latex=\"$m^{2}+n^{2}+8n-2=0$\"><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mi>n</mi><mn>2</mn></msup><mo>+</mo><mn>8</mn><mi>n</mi><mo>−</mo><mn>2</mn><mo>=</mo><mn>0</mn></mrow></math><span style=\"font-family: 宋体;\">,即</span><math math-svg=\"https://img.xkw.com/dksih/formula/e7b780ca952139117837040206eb3a94.svg\" latex=\"$m^{2}+\\left(n+4\\right)^{2}=18\\left(m\\neq 0\\right)$\"><mrow><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>n</mi><mo>+</mo><mn>4</mn></mrow></mfenced></mrow><mn>2</mn></msup><mo>=</mo><mn>18</mn><mfenced close=\")\" open=\"(\"><mrow><mi>m</mi><mo>≠</mo><mn>0</mn></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">,</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">所以点</span><math math-svg=\"https://img.xkw.com/dksih/formula/dad2a36927223bd70f426ba06aea4b45.svg\" latex=\"$P$\"><mi>P</mi></math><span style=\"font-family: 宋体;\">在以</span><math math-svg=\"https://img.xkw.com/dksih/formula/1456f21482e3db2d5fd4aefa861f4c3e.svg\" latex=\"$N\\left(0,-4\\right)$\"><mrow><mi>N</mi><mfenced close=\")\" open=\"(\"><mrow><mn>0</mn><mo>,</mo><mo>−</mo><mn>4</mn></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">为圆心,</span><math math-svg=\"https://img.xkw.com/dksih/formula/8af2fdf1944afebb51cb6a5e6c74aadd.svg\" latex=\"$3\\sqrt{2}$\"><mrow><mn>3</mn><msqrt><mn>2</mn></msqrt></mrow></math><span style=\"font-family: 宋体;\">为半径的圆上（除去两个点）,</span></p><p style=\"text-align:justify;word-break:break-word;\"><math math-svg=\"https://img.xkw.com/dksih/formula/4f99d599e32a9de4fe05f6d1ee0c2404.svg\" latex=\"$\\left|  PQ\\right|  _{\\max }$\"><mrow><msub><mrow><mfenced close=\"|\" open=\"|\"><mrow><mi>P</mi><mi>Q</mi></mrow></mfenced></mrow><mrow><mi>max</mi></mrow></msub></mrow></math><span style=\"font-family: 宋体;\">为</span><math math-svg=\"https://img.xkw.com/dksih/formula/acc290b44635265137fdf13146b6a6d9.svg\" latex=\"$Q$\"><mi>Q</mi></math><span style=\"font-family: 宋体;\">到圆心</span><math math-svg=\"https://img.xkw.com/dksih/formula/54a5d7d3b6b63fe5c24c3907b7a8eaa3.svg\" latex=\"$N$\"><mi>N</mi></math><span style=\"font-family: 宋体;\">的距离加上半径,</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">法一：设</span><math math-svg=\"https://img.xkw.com/dksih/formula/a044262c6d3e3fdbc54b903c009b27e4.svg\" latex=\"$Q\\left(3\\cos \\theta ,\\sin \\theta \\right)$\"><mrow><mi>Q</mi><mfenced close=\")\" open=\"(\"><mrow><mn>3</mn><mi>cos</mi><mi>θ</mi><mo>,</mo><mi>sin</mi><mi>θ</mi></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">,所以</span></p><p style=\"text-align:justify;word-break:break-word;\"><math math-svg=\"https://img.xkw.com/dksih/formula/7b76f2bb01e39f011d17c14d73426aff.svg\" latex=\"$\\left|  QN\\right|  ^{2}=\\left(3\\cos \\theta \\right)^{2}+\\left(\\sin \\theta +4\\right)^{2}=9\\cos ^{2}\\theta +\\sin ^{2}\\theta +8\\sin \\theta +16$\"><mrow><msup><mrow><mfenced close=\"|\" open=\"|\"><mrow><mi>Q</mi><mi>N</mi></mrow></mfenced></mrow><mn>2</mn></msup><mo>=</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mn>3</mn><mi>cos</mi><mi>θ</mi></mrow></mfenced></mrow><mn>2</mn></msup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>sin</mi><mi>θ</mi><mo>+</mo><mn>4</mn></mrow></mfenced></mrow><mn>2</mn></msup><mo>=</mo><mn>9</mn><msup><mrow><mi>cos</mi></mrow><mn>2</mn></msup><mi>θ</mi><mo>+</mo><msup><mrow><mi>sin</mi></mrow><mn>2</mn></msup><mi>θ</mi><mo>+</mo><mn>8</mn><mi>sin</mi><mi>θ</mi><mo>+</mo><mn>16</mn></mrow></math></p><p style=\"text-align:justify;word-break:break-word;\"><math math-svg=\"https://img.xkw.com/dksih/formula/76841e67d859d4ade104cae7c07a88ec.svg\" latex=\"$=8\\cos ^{2}\\theta +1+8\\sin \\theta +16$\"><mrow><mo>=</mo><mn>8</mn><msup><mrow><mi>cos</mi></mrow><mn>2</mn></msup><mi>θ</mi><mo>+</mo><mn>1</mn><mo>+</mo><mn>8</mn><mi>sin</mi><mi>θ</mi><mo>+</mo><mn>16</mn></mrow></math></p><p style=\"text-align:justify;word-break:break-word;\"><math math-svg=\"https://img.xkw.com/dksih/formula/82879874f18902e87db53e64e4778f35.svg\" latex=\"$=8\\left(1-\\sin ^{2}\\theta \\right)+8\\sin \\theta +17$\"><mrow><mo>=</mo><mn>8</mn><mfenced close=\")\" open=\"(\"><mrow><mn>1</mn><mo>−</mo><msup><mrow><mi>sin</mi></mrow><mn>2</mn></msup><mi>θ</mi></mrow></mfenced><mo>+</mo><mn>8</mn><mi>sin</mi><mi>θ</mi><mo>+</mo><mn>17</mn></mrow></math></p><p style=\"text-align:justify;word-break:break-word;\"><math math-svg=\"https://img.xkw.com/dksih/formula/bb6a49f15c35243a6c1bcdb3da1e7187.svg\" latex=\"$=-8\\sin ^{2}\\theta +8\\sin \\theta +25$\"><mrow><mo>=</mo><mo>−</mo><mn>8</mn><msup><mrow><mi>sin</mi></mrow><mn>2</mn></msup><mi>θ</mi><mo>+</mo><mn>8</mn><mi>sin</mi><mi>θ</mi><mo>+</mo><mn>25</mn></mrow></math></p><p style=\"text-align:justify;word-break:break-word;\"><math math-svg=\"https://img.xkw.com/dksih/formula/26c43b2b5e0a5f97865de284978aa85a.svg\" latex=\"$=-8\\left(\\sin \\theta -\\frac{1}{2}\\right)^{2}+27\\leq 27$\"><mrow><mo>=</mo><mo>−</mo><mn>8</mn><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><mi>sin</mi><mi>θ</mi><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow></mfenced></mrow><mn>2</mn></msup><mo>+</mo><mn>27</mn><mo>≤</mo><mn>27</mn></mrow></math><span style=\"font-family: 宋体;\">,当且仅当</span><math math-svg=\"https://img.xkw.com/dksih/formula/0bc3129244f8ed5b406c4e1863b8cf9e.svg\" latex=\"$\\sin \\theta =\\frac{1}{2}$\"><mrow><mi>sin</mi><mi>θ</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow></math><span style=\"font-family: 宋体;\">时取等号,</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">所以</span><math math-svg=\"https://img.xkw.com/dksih/formula/f42e03cde0bfa80357ba2f1800e68a60.svg\" latex=\"$\\left|  PQ\\right|  _{\\max }=\\sqrt{27}+3\\sqrt{2}=3\\left(\\sqrt{3}+\\sqrt{2}\\right)$\"><mrow><msub><mrow><mfenced close=\"|\" open=\"|\"><mrow><mi>P</mi><mi>Q</mi></mrow></mfenced></mrow><mrow><mi>max</mi></mrow></msub><mo>=</mo><msqrt><mrow><mn>27</mn></mrow></msqrt><mo>+</mo><mn>3</mn><msqrt><mn>2</mn></msqrt><mo>=</mo><mn>3</mn><mfenced close=\")\" open=\"(\"><mrow><msqrt><mn>3</mn></msqrt><mo>+</mo><msqrt><mn>2</mn></msqrt></mrow></mfenced></mrow></math><span style=\"font-family: 'Times New Roman';\">.</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">法二：设</span><math math-svg=\"https://img.xkw.com/dksih/formula/3ab2d813be593bf677edbaadc947ba2e.svg\" latex=\"$Q\\left(x_{Q},y_{Q}\\right)$\" xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>Q</mi><mfenced><mrow><msub><mi>x</mi><mi>Q</mi></msub><mo>,</mo><msub><mi>y</mi><mi>Q</mi></msub></mrow></mfenced></math><span style=\"font-family: 宋体;\">，则</span><math math-svg=\"https://img.xkw.com/dksih/formula/2c8c07cc2feca66a3a5b62228ea515ed.svg\" latex=\"$\\frac{{x}_{Q}^{2}}{9}+{y}_{Q}^{2}=1$\"><mrow><mfrac><mrow><msubsup><mi>x</mi><mi>Q</mi><mn>2</mn></msubsup></mrow><mn>9</mn></mfrac><mo>+</mo><msubsup><mi>y</mi><mi>Q</mi><mn>2</mn></msubsup><mo>=</mo><mn>1</mn></mrow></math><span style=\"font-family: 宋体;\">，</span></p><p style=\"text-align:justify;word-break:break-word;\"><math math-svg=\"https://img.xkw.com/dksih/formula/1c8eae8382e61e01e06213d3de511234.svg\" latex=\"$\\left|  QN\\right|  ^{2}={x}_{Q}^{2}+\\left(y_{Q}+4\\right)^{2}=9-9{y}_{Q}^{2}+{y}_{Q}^{2}+8y_{Q}+16=-8{y}_{Q}^{2}+8y_{Q}+25$\"><mrow><msup><mrow><mfenced close=\"|\" open=\"|\"><mrow><mi>Q</mi><mi>N</mi></mrow></mfenced></mrow><mn>2</mn></msup><mo>=</mo><msubsup><mi>x</mi><mi>Q</mi><mn>2</mn></msubsup><mo>+</mo><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><msub><mi>y</mi><mi>Q</mi></msub><mo>+</mo><mn>4</mn></mrow></mfenced></mrow><mn>2</mn></msup><mo>=</mo><mn>9</mn><mo>−</mo><mn>9</mn><msubsup><mi>y</mi><mi>Q</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>y</mi><mi>Q</mi><mn>2</mn></msubsup><mo>+</mo><mn>8</mn><msub><mi>y</mi><mi>Q</mi></msub><mo>+</mo><mn>16</mn><mo>=</mo><mo>−</mo><mn>8</mn><msubsup><mi>y</mi><mi>Q</mi><mn>2</mn></msubsup><mo>+</mo><mn>8</mn><msub><mi>y</mi><mi>Q</mi></msub><mo>+</mo><mn>25</mn></mrow></math></p><p style=\"text-align:justify;word-break:break-word;\"><math math-svg=\"https://img.xkw.com/dksih/formula/1191d37dd903be25926344ceb9c4dbd2.svg\" latex=\"$=-8\\left(y_{Q}-\\frac{1}{2}\\right)^{2}+27\\leq 27$\"><mrow><mo>=</mo><mo>−</mo><mn>8</mn><msup><mrow><mfenced close=\")\" open=\"(\"><mrow><msub><mi>y</mi><mi>Q</mi></msub><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow></mfenced></mrow><mn>2</mn></msup><mo>+</mo><mn>27</mn><mo>≤</mo><mn>27</mn></mrow></math><span style=\"font-family: 宋体;\">，当且仅当</span><math math-svg=\"https://img.xkw.com/dksih/formula/9f697b3652ee2a49d7423121b81279bb.svg\" latex=\"$y_{Q}=\\frac{1}{2}$\"><mrow><msub><mi>y</mi><mi>Q</mi></msub><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow></math><span style=\"font-family: 宋体;\">时取等号,</span></p><p style=\"text-align:justify;word-break:break-word;\"><span style=\"font-family: 宋体;\">故</span><math math-svg=\"https://img.xkw.com/dksih/formula/f42e03cde0bfa80357ba2f1800e68a60.svg\" latex=\"$\\left|  PQ\\right|  _{\\max }=\\sqrt{27}+3\\sqrt{2}=3\\left(\\sqrt{3}+\\sqrt{2}\\right)$\"><mrow><msub><mrow><mfenced close=\"|\" open=\"|\"><mrow><mi>P</mi><mi>Q</mi></mrow></mfenced></mrow><mrow><mi>max</mi></mrow></msub><mo>=</mo><msqrt><mrow><mn>27</mn></mrow></msqrt><mo>+</mo><mn>3</mn><msqrt><mn>2</mn></msqrt><mo>=</mo><mn>3</mn><mfenced close=\")\" open=\"(\"><mrow><msqrt><mn>3</mn></msqrt><mo>+</mo><msqrt><mn>2</mn></msqrt></mrow></mfenced></mrow></math><span style=\"font-family: 宋体;\">.</span></p></div></div>
`
const html2 = `<div class="qml-explanation"><div class="qml-seg" seg-name="分析">【分析】<p style="text-align:justify;word-break:break-word;"><span style="font-family: 宋体;">本题考查同类二次根式，根据被开方数相同的最简二次根式叫做同类二次根式进行求解即可．</span></p></div><div class="qml-seg" seg-name="详解">【详解】<p style="text-align: left;"><span style="font-family: 宋体;">解：∵</span><img  src="https://img.xkw.com/dksih/formula/5b35fbd03f63c0c0c2097cfe76c82acd.png" class="xkw-math-img" /><span style="font-family: 宋体;">，且</span><img  src="https://img.xkw.com/dksih/formula/38fda303240e35a04641e7e602dcc414.png" class="xkw-math-img" /><span style="font-family: 宋体;">与最简二次根式</span><img  src="https://img.xkw.com/dksih/formula/c5a3d5db8c89f402d40664945f3ad818.png" class="xkw-math-img" /><span style="font-family: 宋体;">可以合并，</span></p><p style="text-align: left;"><span style="font-fam
ily: 宋体;">∴</span><img  src="https://img.xkw.com/dksih/formula/03e6208e416d648e0411c24bc1a69362.png" class="xkw-math-img" /><span style="font-family: 宋体;">，</span></p><p style="text-align: left;"><span style="font-family: 宋体;">∴</span><img  src="https://img.xkw.com/dksih/formula/e94f16d5ed858699bfea5039a7bf8ae6.png" class="xkw-math-img" /><span style="font-family: 宋体;">；</span></p><p style="text-align: left;"><span style="font-family: 宋体;">故答案为：</span><span style="font-family: 'Times New Roman';">2</span><span style="font-family: 宋体;">．</span></p></div></div>`

func TestHTMLToImage(t *testing.T) {
	var err error
	chromePool, err = NewChromePool(1)
	if err != nil {
		t.Fatalf("Failed to create Chrome pool: %v", err)
	}
	// Setup graceful shutdown - 现在会自动关闭所有 context
	defer chromePool.Shutdown()
	browserCtx := chromePool.Get()
	defer chromePool.Return(browserCtx)

	res, err := HTMLToImage(browserCtx, html)
	if err != nil {
		t.Fatalf("Failed to convert HTML to image: %v", err)
	}
	err = os.WriteFile("test.png", res, 0644)
	if err != nil {
		t.Fatalf("Failed to save image to test.png: %v", err)
	}

	// t.Logf("Image: %v", res)
}
